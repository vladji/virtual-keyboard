!function(t){var e={};function s(a){if(e[a])return e[a].exports;var i=e[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=1)}([function(t,e,s){},function(t,e,s){"use strict";s.r(e);s(0);const a=["~","!","@","#","$","%","^","&","*","(",")","_","+","\\",","],i=["`","q","w","e","r","t","y","u","i","o","p","[","]","a","s","d","f","g","h","j","k","l",";","'","z","x","c","v","b","n","m",",",".","/"];class l{constructor(){this.upperCase=!1,this.defaultSymb=[],this.ruLang=[]}static textAreaInit(){const t=document.createElement("form");t.innerHTML='<textarea class="textarea"></textarea>',document.body.append(t)}static keybordInit(t){const e=document.createElement("div");e.classList="keybord-wrap";for(let t=0;t<5;){const s=document.createElement("div");s.classList="row",e.append(s),t+=1}document.body.append(e);const s=e.querySelectorAll(".row");for(let e=0;e<t.length&&e<s.length;){for(let a=0;a<t[e].length;){const i=document.createElement("div");i.innerHTML=`${t[e][a].val}`,i.classList=`${t[e][a].class}`,s[e].append(i),a+=1}e+=1}const a=document.createElement("p");a.classList="info",a.innerHTML="<span>Alt + Shift</span>: to switch language",document.body.append(a)}transform(t){const e=document.querySelectorAll(".switch");if(t){for(let t=0;t<e.length;){let s=e[t].innerHTML;s=s.toUpperCase(),e[t].innerHTML=s,t+=1}this.upperCase=!0}else{for(let t=0;t<e.length;){let s=e[t].innerHTML;s=s.toLowerCase(),e[t].innerHTML=s,t+=1}this.upperCase=!1}}changeSymb(){const t=document.querySelectorAll(".symb");if(0===this.defaultSymb.length)for(let e=0;e<t.length;)this.defaultSymb.push(t[e].innerHTML),t[e].innerHTML=a[e],e+=1;else{for(let e=0;e<t.length;)t[e].innerHTML=this.defaultSymb[e],e+=1;this.defaultSymb.length=0}}switchLang(t){const e=document.querySelectorAll(".switch");if("en"===t)for(let t=0;t<i.length;)this.ruLang.push(e[t].innerHTML),e[t].innerHTML=i[t],t+=1;else{for(let t=0;t<this.ruLang.length;)e[t].innerHTML=this.ruLang[t],t+=1;this.ruLang.length=0}this.transform(this.upperCase)}}class n{constructor(t){this.view=new l,this.grabStore(),this.keysDefault=t,this.textArea=document.querySelector(".textarea"),this.cursorPos=0,this.caps=0,this.switch=!1,this.lang="ru",this.store={}}keybordInit(){const t=this.keysDefault;l.keybordInit(t)}static animation(t){const e=t.target?t.target:t;e.classList.add("animation-key","pressed-btn"),setTimeout(()=>e.classList.remove("animation-key"),300)}inputClick(){const t=this.textArea;this.cursorPos=t.selectionEnd}keyUp(t){const e=t.target?t.target:t;return(!e.matches(".caps")||!this.caps)&&e.classList.remove("pressed-btn")}keyDown(t){const e=t.target?t.target:t,s=this.textArea,a=this.cursorPos,i=e.innerHTML;if(e.matches(".print")&&(s.value=s.value.slice(0,a)+i+s.value.slice(a,s.value.length),this.cursorPos+=1),e.matches(".space")){const t=" ";s.value=s.value.slice(0,a)+t+s.value.slice(a,s.value.length),this.cursorPos+=1}if(e.matches(".caps")&&(this.caps=this.caps?0:1,this.view.transform(this.caps)),e.matches(".tab")){const t="\t";s.value=s.value.slice(0,a)+t+s.value.slice(a,s.value.length),this.cursorPos+=8}e.matches(".enter")&&(s.value+="\n",this.cursorPos=s.selectionEnd),e.matches(".del")&&(s.selectionStart!==s.selectionEnd&&(this.cursorPos=s.selectionStart,s.value=s.value.slice(0,s.selectionStart)+s.value.slice(s.selectionEnd-1,s.value.length)),this.cursorPos?s.value=s.value.slice(0,this.cursorPos)+s.value.slice(this.cursorPos+1,s.value.length):(1===s.value.length&&(s.value=""),s.value=s.value.slice(0,1)+s.value.slice(2,s.value.length))),e.matches(".backspace")&&(s.selectionStart!==s.selectionEnd&&(this.cursorPos=s.selectionStart,s.value=s.value.slice(0,s.selectionStart-1)+s.value.slice(s.selectionEnd,s.value.length)),this.cursorPos&&(s.value=s.value.slice(0,this.cursorPos-1)+s.value.slice(this.cursorPos,s.value.length),this.cursorPos-=1))}shift(t){return 2!==t&&(this.switch||(this.view.changeSymb(),this.caps=this.caps?0:1,this.view.transform(this.caps)),1)}changeLang(){this.lang="ru"===this.lang?"en":"ru",this.view.switchLang(this.lang),this.switch=!0}grabStore(){window.addEventListener("load",()=>{if(localStorage.getItem("storeKey")){const t=JSON.parse(localStorage.getItem("storeKey"));if("en"===t.language&&(this.lang="en",this.view.switchLang(this.lang)),t.caps){this.caps=1,this.view.transform(this.caps),document.querySelector(".caps").classList.add("pressed-btn")}}}),window.addEventListener("beforeunload",()=>{this.store.caps=this.caps,this.store.language=this.lang;const t=JSON.stringify(this.store);localStorage.setItem("storeKey",t)})}}const c=[[{val:"ё",class:"switch symb print Backquote"},{val:"1",class:"def symb print Digit1"},{val:"2",class:"def symb print Digit2"},{val:"3",class:"def symb print Digit3"},{val:"4",class:"def symb print Digit4"},{val:"5",class:"def symb print Digit5"},{val:"6",class:"def symb print Digit6"},{val:"7",class:"def symb print Digit7"},{val:"8",class:"def symb print Digit8"},{val:"9",class:"def symb print Digit9"},{val:"0",class:"def symb print Digit0"},{val:"-",class:"def symb print Minus"},{val:"=",class:"def symb print Equal"},{val:"Backspace",class:"def backspace Backspace"}],[{val:"Tab",class:"def tab Tab"},{val:"й",class:"switch print KeyQ"},{val:"ц",class:"switch print KeyW"},{val:"у",class:"switch print KeyE"},{val:"к",class:"switch print KeyR"},{val:"е",class:"switch print KeyT"},{val:"н",class:"switch print KeyY"},{val:"г",class:"switch print KeyU"},{val:"ш",class:"switch print KeyI"},{val:"щ",class:"switch print KeyO"},{val:"з",class:"switch print KeyP"},{val:"х",class:"switch print BracketLeft"},{val:"ъ",class:"switch print BracketRight"},{val:"/",class:"def symb print Backslash"},{val:"DEL",class:"def del Delete"}],[{val:"CapsLock",class:"def caps CapsLock"},{val:"ф",class:"switch print KeyA"},{val:"ы",class:"switch print KeyS"},{val:"в",class:"switch print KeyD"},{val:"а",class:"switch print KeyF"},{val:"п",class:"switch print KeyG"},{val:"р",class:"switch print KeyH"},{val:"о",class:"switch print KeyJ"},{val:"л",class:"switch print KeyK"},{val:"д",class:"switch print KeyL"},{val:"ж",class:"switch print Semicolon"},{val:"э",class:"switch print Quote"},{val:"ENTER",class:"def enter Enter"}],[{val:"Shift",class:"def shift ShiftLeft"},{val:"я",class:"switch print KeyZ"},{val:"ч",class:"switch print KeyX"},{val:"с",class:"switch print KeyC"},{val:"м",class:"switch print KeyV"},{val:"и",class:"switch print KeyB"},{val:"т",class:"switch print KeyN"},{val:"ь",class:"switch print KeyM"},{val:"б",class:"switch print Comma"},{val:"ю",class:"switch print Period"},{val:".",class:"switch symb print Slash"},{val:"&#9650;",class:"def arrow-up ArrowUp"},{val:"Shift",class:"def shift ShiftRight"}],[{val:"Ctrl",class:"def ctrl ControlLeft"},{val:"Win",class:"def win MetaLeft"},{val:"Alt",class:"def alt AltLeft"},{val:"",class:"def space Space"},{val:"Alt",class:"def alt AltRight"},{val:"&#9668;",class:"def arrow-left ArrowLeft"},{val:"&#9660;",class:"def arrow-down ArrowDown"},{val:"&#9658;",class:"def arrow-right ArrowRight"},{val:"Ctrl",class:"def ctrl ControlRight"}]];l.textAreaInit(),(new class{constructor(){this.keybordModel=new n(c),this.textArea=document.querySelector(".textarea"),this.set=new Set}lesteners(){const t=this.keybordModel;t.keybordInit();const e=document.querySelector(".keybord-wrap");let s=null,a=null;const i=this.textArea;e.addEventListener("mousedown",e=>e.target.matches(".row")?0:(n.animation(e),e.target.matches(".shift")&&t.shift(),t.keyDown(e),e.target.matches(".shift")||e.target.matches(".caps")||(s=setTimeout(()=>{a=setInterval(()=>t.keyDown(e),50)},800)),e.target.addEventListener("selectstart",t=>{t.preventDefault()}),1)),e.addEventListener("mouseup",e=>{clearTimeout(s),clearInterval(a),e.target.matches(".shift")&&t.shift(),t.keyUp(e)}),document.body.addEventListener("keydown",e=>{const s=document.querySelector(`.${e.code}`);return s&&!e.repeat&&n.animation(s),(!e.repeat||"ShiftLeft"!==e.code&&"ShiftRight"!==e.code&&"CapsLock"!==e.code)&&(s&&(s.matches(".shift")&&(this.set.add(s),t.shift(this.set.size)),s.matches(".alt")&&this.set.add(s),t.keyDown(s)),2===this.set.size&&t.changeLang(),!0)}),document.body.addEventListener("keyup",e=>{const s=document.querySelector(`.${e.code}`);s&&(t.keyUp(s),s.matches(".shift")&&(t.shift(),t.switch=!1),this.set.clear())}),i.addEventListener("click",t.inputClick.bind(t)),i.addEventListener("select",()=>{console.log("select"),console.log(i.selectionStart),console.log(i.selectionEnd)})}}).lesteners()}]);
//# sourceMappingURL=app.bundle.js.map